def version ="${env.BUILD_ID}"

pipeline{

agent any

tools{
    
    maven "maven3.8.3"
    
} // tools

/*
 options{
 
    timestamps()

    properties([buildDiscarder(logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '5', daysToKeepStr: '', numToKeepStr: '5')

 } */ //closing options

/* triggers{

    pollSCM('* * * * *')
    
 } */ //closing triggers
 
 
stages{

stage('CheckoutCode'){

steps{

git credentialsId: '28f70f33-2db1-46d0-94b8-f0fe4523e251', url: 'https://github.com/wipro-pvt-limited/maven-web-application.git'    
}

}

stage('Build'){

steps{

sh "mvn clean package"

}
}

stage('docker image build'){
    
    steps{
        
        sh """\
        
        
          #!/bin/bash -l

        
        docker build -t tocobell2:${version} .
        
        """
        
    }
}

stage('Docker login'){
    
    steps{
        
        sh """\
          #!/bin/bash -l

        docker login -u shaikfayazz444 -p 8688949515
        
<<<<<<< HEAD
        docker tag tocobell2:${version} shaikfayazz444/ayaan:${version}
=======
        docker tag tocobell:${version} shaikfayazz444/ayaan:${version}
>>>>>>> 1b0bbb75aed9dbace8007defdd89a7cc771ba26b
        
        """
        
    }
    
    
}


stage('docker push'){
    
    steps{
        
        sh """\
        #!/bin/bash -l
       docker push shaikfayazz444/ayaan:${version}
        
        """
        
    }
}

}//stages closing
}//pipeline closing

/*post{
    
    success{
        
    }
    
    
} */
//updated code will be available in Remote Repository

//Hi please take updated code

//1

//2

//good morning all,please take updated code.
